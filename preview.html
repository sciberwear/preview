<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SCIBERWEAR Preview</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    @font-face {
      font-family: 'SFMonoMedium';
      src: url('https://cdn.jsdelivr.net/gh/sciberwear/assets@main/SFMonoMedium.otf');
    }

    * {
      box-sizing: border-box;
      font-family: 'SFMonoMedium', monospace;
      font-size: 12px;
    }

    body {
      margin: 0;
      padding: 20px;
      background: #e8e8e8;
      display: flex;
      justify-content: center;
    }

    .zoomable {
  touch-action: none;
  user-select: none;
  }

  .zoomable.dragging {
  cursor: grabbing;
  }

    .container {
      display: flex;
      flex-direction: row;
      gap: 20px;
    }

    .tab-buttons {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .nav-btn {
      background: #e8e8e8;
      border: 1.8px solid #000;
      padding: 6px 10px;
      color: #000;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .nav-btn:hover,
    .nav-btn.active {
      background: #000;
      color: #fff;
    }

    .section {
      display: none;
      max-width: 640px;
      width: 100%;
    }

    .section.active {
      display: block;
    }

    .video-wrapper,
    .image-wrapper {
      position: relative;
      width: 100%;
      aspect-ratio: 16 / 9;
      border: 1.8px solid black;
      overflow: hidden;
      background: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    video {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }

    .zoomable {
      width: 100%;
      height: 100%;
      object-fit: contain;
      transition: transform 0.1s ease;
      transform-origin: center center;
      cursor: grab;
      user-select: none;
    }

    .zoomable.dragging {
      cursor: grabbing;
    }

    .sciberwear-progress {
      position: absolute;
      bottom: 10px;
      left: 5%;
      width: 90%;
      appearance: none;
      height: 6px;
      background: linear-gradient(to right, #000 0%, #000 var(--progress, 0%), #b1b4b5 var(--progress, 0%), #b1b4b5 100%);
      border-radius: 0;
      cursor: pointer;
      display: none;
    }

    .video-wrapper:hover .sciberwear-progress,
    .image-wrapper:hover .sciberwear-progress {
      display: block;
    }

    .sciberwear-progress::-webkit-slider-thumb {
      appearance: none;
      width: 12px;
      height: 12px;
      background: #e8e8e8;
      border: 1.7px solid black;
      cursor: pointer;
      border-radius: 0;
    }

    .sciberwear-progress::-webkit-slider-thumb:hover {
      background: #000;
    }

    .play-btn,
    .restart-btn {
      background: #e8e8e8;
      border: 1.8px solid #000;
      padding: 6px 10px;
      color: #000;
      cursor: pointer;
      font-family: 'SFMonoMedium';
      position: absolute;
      right: 10px;
      z-index: 2;
      display: none;
    }

    .play-btn:hover,
    .restart-btn:hover {
      background: #000;
      color: #fff;
    }

    .play-btn { top: 10px; }
    .restart-btn { top: 46px; }

    .video-wrapper:hover .play-btn,
    .video-wrapper:hover .restart-btn {
      display: block;
    }

    .control-bar {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
    }

    .control-btn {
      background: #b7b7b7;
      border: none;
      padding: 6px 10px;
      color: #000;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .control-btn:hover,
    .control-btn.active {
      background: #000;
      color: #fff;
    }

    .playlist {
      position: absolute;
      top: 10px;
      left: 10px;
      width: 160px;
      background: #e8e8e8;
      border: 1.8px solid #000;
      padding: 8px;
      z-index: 3;
      display: none;
    }

    .playlist-item {
      padding: 6px 4px;
      cursor: pointer;
      border-bottom: 1px solid #ccc;
    }

    .playlist-item:hover,
    .playlist-item.active {
      background: #b1b4b5;
    }

    #full .video-wrapper:hover .playlist {
      display: block;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="tab-buttons">
      <button class="nav-btn active" onclick="switchTab('full')">Full</button>
      <button class="nav-btn" onclick="switchTab('front')">Front</button>
      <button class="nav-btn" onclick="switchTab('back')">Back</button>
      <button class="nav-btn" onclick="switchTab('additional')">Additional</button>
    </div>

    <!-- Full -->
    <div id="full" class="section active">
      <div class="video-wrapper">
        <div class="playlist">
          <div class="playlist-item" onclick="seekTo('fullVideo', 0, this)">Intro – 0:00</div>
          <div class="playlist-item" onclick="seekTo('fullVideo', 30, this)">Scene 1 – 0:30</div>
          <div class="playlist-item" onclick="seekTo('fullVideo', 60, this)">Scene 2 – 1:00</div>
        </div>
        <video id="fullVideo" src="https://cdn.jsdelivr.net/gh/sciberwear/assets@main/clo3d-fashion-show-1080.mp4" muted autoplay loop></video>
        <button class="play-btn" onclick="togglePlay('fullVideo', this)">Pause</button>
        <button class="restart-btn" onclick="restartVideo('fullVideo')">Restart</button>
        <input type="range" id="fullProgress" class="sciberwear-progress" value="0" min="0" max="100" step="0.1">
      </div>
    </div>

    <!-- Shared image layout: Front / Back / Additional -->
    <div id="front" class="section">
      <div class="image-wrapper">
        <img id="frontImage" class="zoomable" src="" />
        <input type="range" id="frontZoom" class="sciberwear-progress" min="100" max="300" value="100">
      </div>
      <div class="control-bar">
        <button class="control-btn" onclick="prevImage('front')">Previous</button>
        <span id="frontIndex">1</span>
        <button class="control-btn" onclick="nextImage('front')">Next</button>
      </div>
    </div>

    <div id="back" class="section">
      <div class="image-wrapper">
        <img id="backImage" class="zoomable" src="" />
        <input type="range" id="backZoom" class="sciberwear-progress" min="100" max="300" value="100">
      </div>
      <div class="control-bar">
        <button class="control-btn" onclick="prevImage('back')">Previous</button>
        <span id="backIndex">1</span>
        <button class="control-btn" onclick="nextImage('back')">Next</button>
      </div>
    </div>

    <div id="additional" class="section">
      <div class="image-wrapper">
        <img id="additionalImage" class="zoomable" src="" />
        <input type="range" id="additionalZoom" class="sciberwear-progress" min="100" max="300" value="100">
      </div>
      <div class="control-bar">
        <button class="control-btn" onclick="prevImage('additional')">Previous</button>
        <span id="additionalIndex">1</span>
        <button class="control-btn" onclick="nextImage('additional')">Next</button>
      </div>
    </div>
  </div>

  <script>
  const tabs = document.querySelectorAll('.nav-btn');
  const sections = document.querySelectorAll('.section');
  const fullVideo = document.getElementById('fullVideo');

  let currentTab = 'full';

  function switchTab(id) {
    if (id !== 'full') fullVideo.pause();
    tabs.forEach(btn => btn.classList.remove('active'));
    sections.forEach(sec => sec.classList.remove('active'));
    document.querySelector(`[onclick*="${id}"]`).classList.add('active');
    document.getElementById(id).classList.add('active');

    if (id === 'full') {
      fullVideo.currentTime = 0;
      fullVideo.play();
    }

    currentTab = id;
  }

  function togglePlay(id, button) {
    const video = document.getElementById(id);
    if (video.paused) {
      video.play();
      button.textContent = 'Pause';
    } else {
      video.pause();
      button.textContent = 'Play';
    }
  }

  function restartVideo(id) {
    const video = document.getElementById(id);
    video.currentTime = 0;
    video.play();
  }

  function setupProgress(videoId, progressId) {
    const video = document.getElementById(videoId);
    const progress = document.getElementById(progressId);
    video.addEventListener('timeupdate', () => {
      const percent = (video.currentTime / video.duration) * 100;
      progress.value = percent;
      progress.style.setProperty('--progress', `${percent}%`);
    });
    progress.addEventListener('input', () => {
      video.currentTime = (progress.value / 100) * video.duration;
    });
  }

  setupProgress('fullVideo', 'fullProgress');

  function seekTo(videoId, time, el) {
    const video = document.getElementById(videoId);
    video.currentTime = time;
    video.play();
    document.querySelectorAll(`#${videoId}`).forEach(i => i.classList.remove('active'));
    el.classList.add('active');
  }

  const imageSources = {
    front: ["image1.svg", "image2.svg", "image3.svg"],
    back: ["image4.svg", "image5.svg"],
    additional: ["image6.svg", "image7.svg"]
  };

  const indices = { front: 0, back: 0, additional: 0 };

  function updateImage(tab) {
    const img = document.getElementById(`${tab}Image`);
    const indexSpan = document.getElementById(`${tab}Index`);
    img.src = `https://raw.githubusercontent.com/sciberwear/sciberwear-slideshow/refs/heads/main/Image/${imageSources[tab][indices[tab]]}`;
    indexSpan.textContent = indices[tab] + 1;
  }

  function nextImage(tab) {
    indices[tab] = (indices[tab] + 1) % imageSources[tab].length;
    updateImage(tab);
  }

  function prevImage(tab) {
    indices[tab] = (indices[tab] - 1 + imageSources[tab].length) % imageSources[tab].length;
    updateImage(tab);
  }

  ['front', 'back', 'additional'].forEach(tab => {
    updateImage(tab);
    const zoomSlider = document.getElementById(`${tab}Zoom`);
    const image = document.getElementById(`${tab}Image`);
    let isDragging = false, startX = 0, startY = 0, lastX = 0, lastY = 0;
    let lastTouchDistance = 0;
    let lastTap = 0;

    function applyTransform(scale = 1, dx = 0, dy = 0) {
      const wrapper = image.parentElement.getBoundingClientRect();
      const imgSize = {
        w: wrapper.width * scale,
        h: wrapper.height * scale
      };
      const bounds = {
        maxX: (imgSize.w - wrapper.width) / 2,
        maxY: (imgSize.h - wrapper.height) / 2
      };
      dx = Math.max(-bounds.maxX, Math.min(bounds.maxX, dx));
      dy = Math.max(-bounds.maxY, Math.min(bounds.maxY, dy));
      image.style.transform = `scale(${scale}) translate(${dx}px, ${dy}px)`;
      return { dx, dy };
    }

    zoomSlider.addEventListener('input', () => {
      const zoom = zoomSlider.value / 100;
      if (zoom === 1) {
        lastX = 0;
        lastY = 0;
        image.style.transform = `scale(1)`;
        zoomSlider.style.setProperty('--progress', `0%`);
      } else {
        const result = applyTransform(zoom, lastX, lastY);
        lastX = result.dx;
        lastY = result.dy;
        zoomSlider.style.setProperty('--progress', `${zoomSlider.value}%`);
      }
    });

    image.addEventListener('mousedown', (e) => {
      if (zoomSlider.value == 100) return;
      isDragging = true;
      startX = e.clientX;
      startY = e.clientY;
      image.classList.add('dragging');
    });

    document.addEventListener('mousemove', (e) => {
      if (!isDragging) return;
      e.preventDefault();
      const dx = e.clientX - startX + lastX;
      const dy = e.clientY - startY + lastY;
      const zoom = zoomSlider.value / 100;
      const result = applyTransform(zoom, dx, dy);
    });

    document.addEventListener('mouseup', (e) => {
      if (!isDragging) return;
      const dx = e.clientX - startX;
      const dy = e.clientY - startY;
      lastX += dx;
      lastY += dy;
      isDragging = false;
      image.classList.remove('dragging');
    });

    // Touch support
    image.addEventListener('touchstart', (e) => {
      if (e.touches.length === 1) {
        if (zoomSlider.value == 100) return;
        isDragging = true;
        startX = e.touches[0].clientX;
        startY = e.touches[0].clientY;
        image.classList.add('dragging');

        const now = Date.now();
        if (now - lastTap < 300) {
          // double tap
          lastX = 0;
          lastY = 0;
          zoomSlider.value = 100;
          zoomSlider.dispatchEvent(new Event('input'));
        }
        lastTap = now;
      } else if (e.touches.length === 2) {
        const dx = e.touches[0].clientX - e.touches[1].clientX;
        const dy = e.touches[0].clientY - e.touches[1].clientY;
        lastTouchDistance = Math.sqrt(dx * dx + dy * dy);
      }
    });

    image.addEventListener('touchmove', (e) => {
      if (e.touches.length === 1 && isDragging) {
        const dx = e.touches[0].clientX - startX + lastX;
        const dy = e.touches[0].clientY - startY + lastY;
        const zoom = zoomSlider.value / 100;
        applyTransform(zoom, dx, dy);
      } else if (e.touches.length === 2) {
        const dx = e.touches[0].clientX - e.touches[1].clientX;
        const dy = e.touches[0].clientY - e.touches[1].clientY;
        const distance = Math.sqrt(dx * dx + dy * dy);
        const delta = distance - lastTouchDistance;
        lastTouchDistance = distance;
        let zoom = zoomSlider.valueAsNumber + delta * 0.2;
        zoom = Math.max(100, Math.min(300, zoom));
        zoomSlider.value = zoom;
        zoomSlider.dispatchEvent(new Event('input'));
      }
    });

    image.addEventListener('touchend', (e) => {
      if (e.touches.length === 0) {
        lastX += e.changedTouches[0].clientX - startX;
        lastY += e.changedTouches[0].clientY - startY;
        isDragging = false;
        image.classList.remove('dragging');
      }
    });
  });
</script>
</body>
</html>
